{% extends "_layout.jinja2" %}

{% block title %}
    Changement de mot de passe
{% endblock title %}

{% block content %}
    <div class="container">
        <h1>Changement de mot de passe</h1>

        <p class="lead">
            Vous pouvez ici changer le mot de passe de votre compte de manière autonome.
        </p>

        <form method="post">

            {% if form.errors.values() %}
                <div class="alert alert-danger">
                    Pas si vite ! Les erreurs suivantes ont été détectées :
                    <ul class="mt-2">
                        {% for field, errors in form.errors.items() %}
                            {% for error in errors %}
                                <li>{{ form[field].label.text }} : {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <div class="mb-3 row">
                {{ form.oldPassword.label(class="col-form-label col-sm-3") }}
                <div class="col-sm-9">
                    {{ form.oldPassword(class="form-control") }}
                    {% if form.oldPassword.description %}<div class="form-text">{{ form.oldPassword.description }}</div>{% endif %}
                </div>
            </div>

            <div class="mb-3 row">
                {{ form.password1.label(class="col-form-label col-sm-3") }}
                <div class="col-sm-9">
                    {{ form.password1(class="form-control") }}
                    {% if form.password1.description %}<div class="form-text">{{ form.password1.description }}</div>{% endif %}
                </div>
            </div>

            <div class="mb-3 row">
                {{ form.password2.label(class="col-form-label col-sm-3") }}
                <div class="col-sm-9">
                    {{ form.password2(class="form-control") }}
                    {% if form.password2.description %}<div class="form-text">{{ form.password2.description }}</div>{% endif %}
                </div>
            </div>


            <div class="col-12">
                {{ form.hidden_tag() }}
                {{ form.submit(class="btn btn-primary") }}
            </div>

        </form>
    </div>
{% endblock %}